<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Govind G Nair">
<meta name="dcterms.date" content="2020-05-09">
<meta name="description" content="Summary of Book : Never Split the Difference">

<title>Never Split the Difference</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-d166b450ba5a8e9f7a0ab969bf6592c1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-22381ab97ffb8a420d3841344730e94d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog/"> 
<span class="menu-text">Blog</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Never Split the Difference</h1>
                  <div>
        <div class="description">
          Summary of Book : Never Split the Difference
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Book Summary</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Govind G Nair </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 9, 2020</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#chapter-1" id="toc-chapter-1" class="nav-link active" data-scroll-target="#chapter-1">Chapter 1</a></li>
  <li><a href="#chapter-2" id="toc-chapter-2" class="nav-link" data-scroll-target="#chapter-2">Chapter 2</a></li>
  <li><a href="#chapter-3" id="toc-chapter-3" class="nav-link" data-scroll-target="#chapter-3">Chapter 3</a></li>
  <li><a href="#chapter-4" id="toc-chapter-4" class="nav-link" data-scroll-target="#chapter-4">Chapter 4</a></li>
  <li><a href="#chapter-5" id="toc-chapter-5" class="nav-link" data-scroll-target="#chapter-5">Chapter 5</a></li>
  <li><a href="#chapter-6" id="toc-chapter-6" class="nav-link" data-scroll-target="#chapter-6">Chapter 6</a></li>
  <li><a href="#chapter-7" id="toc-chapter-7" class="nav-link" data-scroll-target="#chapter-7">Chapter 7</a></li>
  <li><a href="#chapter-8" id="toc-chapter-8" class="nav-link" data-scroll-target="#chapter-8">Chapter 8</a></li>
  <li><a href="#chapter-9" id="toc-chapter-9" class="nav-link" data-scroll-target="#chapter-9">Chapter 9</a></li>
  <li><a href="#chapter-10" id="toc-chapter-10" class="nav-link" data-scroll-target="#chapter-10">Chapter 10</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>Below are some of my notes/highlights from the book <a href="https://www.amazon.com/Never-Split-Difference-Negotiating-Depended-ebook/dp/B014DUR7L2"><strong>Never Split the Difference: Negotiating as if your life depended on it</strong></a></p>
<section id="chapter-1" class="level3">
<h3 class="anchored" data-anchor-id="chapter-1">Chapter 1</h3>
<ul>
<li><p>The goal of negotiation is discover information and any surprises, not to win an argument.</p></li>
<li><p>Always have a BATNA (Best Alternative to a Negotiated Agreement) before you enter into a negotiation</p></li>
<li><p>Pay attention to the use of personal pronouns. If someone tries to make themselves unimportant by using we/they, they probably are important and have decision making power. If they use I/me, the converse is true.</p></li>
<li><p>Mirroring or isopraxism is a valuable technique to build trust. Copying/imitating is a neurobehavior shown by animals/humans to comfort each other. In the FBI, mirroring simply means repeating the last three words someone just said. By repeating back what people say, you trigger the mirroring instinct and your counterpart will elaborate on what was just said and sustain the process of connecting. It also encourages the other side to empathize and bond with you.</p></li>
<li><p>When you mirror, pause for at least 4 seconds to let the ‘mirror’ work.</p></li>
<li><p>There are three voice tones available to negotiators:</p>
<ol type="1">
<li><p>The late-night FM DJ voice: Use selectively to make a point. Inflect your voice downward, keeping it calm and<br>
slow.When done properly, you create an aura of authority and trustworthiness without triggering defensiveness.</p></li>
<li><p>The positive/playful voice: Should be your default voice. It’s the voice of an easygoing, good-natured person. Your attitude is light and encouraging. The key here is to relax and smile while you’re talking .</p></li>
<li><p>The direct or assertive voice: Used rarely. Will cause problems and create push back.</p></li>
</ol></li>
</ul>
</section>
<section id="chapter-2" class="level3">
<h3 class="anchored" data-anchor-id="chapter-2">Chapter 2</h3>
<ul>
<li><p>Show empathy to build intimacy and trust.</p></li>
<li><p>You can show empathy by deeply listening to a person and observing their face, gestures and tone of voice</p></li>
<li><p>Acknowledge a person’s emotion by labeling it, labels always begin with roughly the same words:</p>
<ul>
<li>It seems like . . .</li>
<li>It sounds like . . .</li>
<li>It looks like . .</li>
</ul></li>
<li><p>Labeling negatives diffuses them (e.g.&nbsp;It looks like my decision to do X has upset you) while labeling positives reinforces them</p></li>
<li><p>Pause after labeling. The other party will break the silence</p></li>
<li><p>Do an ‘accusation audit’ to start with by listing all the most critical things your counterpart can say about you. This takes the sting out of the negotiation.</p></li>
</ul>
</section>
<section id="chapter-3" class="level3">
<h3 class="anchored" data-anchor-id="chapter-3">Chapter 3</h3>
<ul>
<li><p>The word ‘No’ indicates a negotiation has meaningfully started as ‘No’ is often just a temporary decision to maintain the status quo</p></li>
<li><p>We should tailor questions that elicits a ‘No’ from the counter-party. It gives the speaker feelings of safety and control. After having said ’No’, people are more open to moving towards new options and ideas. It also gets the counter-party to pay serous attention to the discussion. Asking ‘Is now a bad time to talk?’ is always better than ‘Do you have a few minutes to talk?’</p></li>
<li><p>An early ’Yes’ is mostly a counterfeit ‘Yes’ to dodge the real decisions, just like you say ‘Yes’ to get rid of a pushy salesman. ‘Yes’ should be the final goal of a negotiation.</p></li>
<li><p>Pushing people to say ‘Yes’ makes them defensive e.g.&nbsp;’Do you like to drink water, Mr Smith?’ in order to sell a water purifier</p></li>
<li><p>One way to get people to say ‘No’ is by mislabeling an emotion or desire. e.g.&nbsp;‘ It seems like you are eager to leave the job’ when they clearly want to stay or ‘It seems like you want the project to fail’.</p></li>
</ul>
</section>
<section id="chapter-4" class="level3">
<h3 class="anchored" data-anchor-id="chapter-4">Chapter 4</h3>
<ul>
<li><p>Instead of ‘Yes’, strive to get to a ‘That’s right’.</p></li>
<li><p>When a person says ‘that’s right’, it means he feels understood and positively affirmed opening the door for more constructive behavior.</p></li>
<li><p>Use a summary to trigger a ‘that’s right’</p></li>
</ul>
</section>
<section id="chapter-5" class="level3">
<h3 class="anchored" data-anchor-id="chapter-5">Chapter 5</h3>
<ul>
<li><p>Reveal your deadline in a negotiation. This reduces the risk of an impasse and your opponent will get to the real deal and concession making more quickly</p></li>
<li><p>Strive for a reputation of being fair. Early on in a negotiation, you can say, “I want you to feel like you are being treated fairly at all times. So please stop me at any time if you feel I’m being unfair, and we’ll address it.”.</p></li>
<li><p>Don’t let an accusation of being ‘not fair’ throw you off kilt, people often quickly make concessions when they are accused of not being ‘fair’. Instead ask how you are treating them unfairly?</p></li>
<li><p>Generally in negotiations involving risk, people are drawn to sure things over probabilities (Certainty effect), and people take greater risks to avoid loss than to achieve gains (Loss Aversion). So make sure that your counterpart feels that there is something to lose if the negotiation fails.</p></li>
<li><p>In salary negotiations, quote a range with the low end of the range being the number you actually want. It also is better to let the company quote a number first in a negotiation.</p></li>
<li><p>Set an extreme anchor as a starting point, letting them know how bad it can be so that the real offer seems reasonable</p></li>
<li><p>It pays to be kind to people as they often feel the need to reciprocate with kindness. This can also be a problem if you ask a question with an easy ‘Yes’ answer, you will be expected tor reciprocate.</p></li>
<li><p>Using precise numbers (e.g.&nbsp;456.7) rather than round numbers (400) forces the opponent to think that you have carefully thought through your argument and position.</p></li>
</ul>
</section>
<section id="chapter-6" class="level3">
<h3 class="anchored" data-anchor-id="chapter-6">Chapter 6</h3>
<ul>
<li><p>Use calibrated questions instead of bluntly saying ‘No’</p></li>
<li><p>If the price is too high when you are buying or too low when you are selling, ask ‘How am I supposed to do that’? By asking this question, you give your opponent an illusion of control and invite him/her to help solve your problem.</p></li>
<li><p>Calibrated questions cannot be close ended that can be answered with a ‘Yes’ or ‘No’. Instead, they start with a list of words people know as reporter’s questions: “who,” “what,” “when,” “where,” “why,” and “how”. It is best to start with ‘what’, ‘how’ and sometimes ‘why’. ’Why’ can backfire as it can come across as accusatory.</p></li>
<li><p>‘Does this look like something you like?’ can be rephrased as ‘What about this works for you?’ or ‘What about this doesn’t work for you?’</p></li>
<li><p>When attacked in a negotiation, pause and avoid angry emotional reactions, instead ask your counterpart a calibrated question</p></li>
<li><p>There is always a team on the other side, you need to be able to influence even those not sitting directly behind the table</p></li>
</ul>
</section>
<section id="chapter-7" class="level3">
<h3 class="anchored" data-anchor-id="chapter-7">Chapter 7</h3>
<ul>
<li><p>A listener always has more control in a conversation as the talker is revealing information.</p></li>
<li><p>You can get to the answer you want by asking carefully calibrated ‘How’ questions.</p></li>
<li><p>‘How’ questions also get your opponent to lay out implementation details that they are now more likely to abide by.</p></li>
<li><p>If the other party responds with ‘I will try’, it means they are planning to fail. Go back to ‘How’ questions so that they define the terms of successful implementation in their own words. Then get a ‘That’s right’ by summarizing what they said.</p></li>
</ul>
</section>
<section id="chapter-8" class="level3">
<h3 class="anchored" data-anchor-id="chapter-8">Chapter 8</h3>
<ul>
<li><p>Keep using calibrated ‘How’ questions to get your counterpart to come up with answers.</p></li>
<li><p>This also forces your counterpart to explain how the deal will be implemented and makes it more likely that he will stick to it given he came up with the idea himself.</p></li>
<li><p>Any project or deal requires clear criteria for success, get you counterpart to think they are defining success by asking</p>
<ul>
<li>How will we know we are on track?</li>
<li>How will we address things if we are off track? Once they answer, summarize and replay until you get a ‘That’s right’</li>
</ul></li>
<li><p>Be wary of the response ‘You are right’. It means they are not bought into the idea. Go back to the ‘How’ questions and re-summarize until you get a ‘That’s right’.</p></li>
<li><p>Face to Face conversations matter. Research in UCLA has shown that only 7% of a message is based on the words, 38% is based on tone of voice while 55% is based on a speaker’s face and body language.</p></li>
<li><p>Three kinds of Yes: Commitment, Confirmation and Counterfeit. Beware of Counterfeit and seek Commitment.</p></li>
<li><p>Rule of Three: Get the counterpart to agree to the same thing three times. It triples the strength of the dynamic you are seeking and surfaces and problems as it is hard to repeatedly fake or lie.</p></li>
<li><p>Say ‘No’ more tactfully by asking’ How can I do that?’ or ‘How am I supposed to do that?’. Deliver this in a deferential way so that it becomes a plea for help. To be more direct you can say ‘I am sorry, I am afraid I just can’t do that’.</p></li>
</ul>
</section>
<section id="chapter-9" class="level3">
<h3 class="anchored" data-anchor-id="chapter-9">Chapter 9</h3>
<ul>
<li><p>If you are a well-prepared negotiator, you want to see the other side name their price first, because you want to see their hand.</p></li>
<li><p>However, you have to be prepared for an extreme anchor and not get unsettled by it. You can do one or more of the following</p>
<ul>
<li>Deflect the punch by saying ‘No’ tactfully as described above</li>
<li>Another good question is ‘What are we trying to accomplish here?’</li>
<li>Detour the conversation to non-monetary issues that can make the final price work e.g.&nbsp;‘Let’s put price off for a moment and talk about what would make this a good deal’ or ‘What else would you be able to offer to make that a good price for me’?</li>
</ul></li>
<li><p>Using ‘Why?’ : Use the defensiveness the question triggers to get your counterpart to defend your position.</p>
<ul>
<li>Ask ‘Why would you do that?’ in a way that the ‘that’ favors you. E.g. When trying to lure a client away from a competitor, ask ‘Why would you ever do business with me?’ or ‘Why would you ever change from your existing s supplier?,they are great’.</li>
</ul></li>
<li><p>Recipe for negotiating a purchase:</p>
<ul>
<li>Set your target price (goal)</li>
<li>Set your first offer at 65% of your target price</li>
<li>Calculate three raises of decreasing increments (to 85,90 and 100%)</li>
<li>Use lots of empathy and different ways of saying ‘No’ to get the other side to counter before increasing your offer</li>
<li>When calculating the final amount, use precise, non-round numbers – this gives the number credibility and weight</li>
<li>On the final number, throw in a non-monetary item (that they probably don’t want) to show you are at your limit.</li>
</ul></li>
</ul>
</section>
<section id="chapter-10" class="level3">
<h3 class="anchored" data-anchor-id="chapter-10">Chapter 10</h3>
<ul>
<li><p>Three types of leverage in negotiations: Positive(the ability to give someone what they want); Negative ( the ability to hurt someone) and Normative( using your counterpart’s norms and principles to bring them around)</p></li>
<li><p>Understand your counterpart’s religion , principles or world view – this could be a source of leverage</p></li>
<li><p>Review everything you hear from your counterpart, use back up listeners so you don’t miss something important</p></li>
<li><p>People are more likely to make concessions to someone who is similar to them, so try to show that you share common ground</p></li>
<li><p>Get face time with your counterpart and pay special attention to verbal and non-verbal communication at unguarded moments. E.g. At the beginning and end of sessions.</p></li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2024, Govind G Nair</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>